# Implementation Plan: Rate Spread Lab CSV ê°œì„  (ì†Œìˆ˜ì  ë¼ìš´ë”© ë° í•œê¸€ ì»¬ëŸ¼ëª…)

> ì‘ì„±/ìš´ì˜ ê·œì¹™(SoT): ë°˜ë“œì‹œ [docs/CLAUDE.md](/home/leeyubeen/workspace/quant/docs/CLAUDE.md)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

**ìƒíƒœ**: âœ… Done

---

ğŸš« **ì´ ì˜ì—­ì€ ì‚­ì œ/ìˆ˜ì • ê¸ˆì§€** ğŸš«

**ìƒíƒœ ì˜µì…˜**: ğŸŸ¡ Draft / ğŸ”„ In Progress / âœ… Done

**Done ì²˜ë¦¬ ê·œì¹™**:
- âœ… Done ì¡°ê±´: DoD ëª¨ë‘ [x] + `skipped=0` + `failed=0`
- âš ï¸ **ìŠ¤í‚µì´ 1ê°œë¼ë„ ì¡´ì¬í•˜ë©´ Done ì²˜ë¦¬ ê¸ˆì§€ + DoD í…ŒìŠ¤íŠ¸ í•­ëª© ì²´í¬ ê¸ˆì§€**
- ìƒì„¸: [docs/CLAUDE.md](/home/leeyubeen/workspace/quant/docs/CLAUDE.md) ì„¹ì…˜ 3, 5 ì°¸ê³ 

---

**ì‘ì„±ì¼**: 2026-01-13 18:00
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2026-01-13 18:00
**ê´€ë ¨ ë²”ìœ„**: tqqq (TQQQ ì‹œë®¬ë ˆì´ì…˜ ë„ë©”ì¸)
**ê´€ë ¨ ë¬¸ì„œ**: src/qbt/tqqq/CLAUDE.md

---

## 0) ê³ ì • ê·œì¹™ (ì´ planì€ ë°˜ë“œì‹œ ì•„ë˜ ê·œì¹™ì„ ë”°ë¥¸ë‹¤)

> ğŸš« **ì´ ì˜ì—­ì€ ì‚­ì œ/ìˆ˜ì • ê¸ˆì§€** ğŸš«
> ì´ ì„¹ì…˜(0)ì€ ì§€ì›Œì§€ë©´ ì•ˆ ë  ë¿ë§Œ ì•„ë‹ˆë¼ **ë¬¸êµ¬ê°€ ìˆ˜ì •ë˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.**
> ê·œì¹™ì˜ ìƒì„¸ ì •ì˜/ì˜ˆì™¸ëŠ” ë°˜ë“œì‹œ [docs/CLAUDE.md](/home/leeyubeen/workspace/quant/docs/CLAUDE.md)ë¥¼ ë”°ë¦…ë‹ˆë‹¤.

- Validationì—ì„œ `poetry run python validate_project.py`ê°€ ì‹¤íŒ¨í•˜ë©´ **í•´ë‹¹ Phaseì—ì„œ ì¦‰ì‹œ ìˆ˜ì • í›„ ì¬ê²€ì¦**í•œë‹¤.
- Phase 0ì€ "ë ˆë“œ(ì˜ë„ì  ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸)" í—ˆìš©, Phase 1ë¶€í„°ëŠ” **ê·¸ë¦° ìœ ì§€**ë¥¼ ì›ì¹™ìœ¼ë¡œ í•œë‹¤.
- ì´ë¯¸ ìƒì„±ëœ planì€ **ì²´í¬ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ ì™¸ ìˆ˜ì • ê¸ˆì§€**í•œë‹¤.
- ìŠ¤í‚µì€ ê°€ëŠ¥í•˜ë©´ **Phase ë¶„í•´ë¡œ ì œê±°**í•œë‹¤.

---

## 1) ëª©í‘œ(Goal)

- [ ] `tqqq_rate_spread_lab_monthly.csv` ì†Œìˆ˜ì  ë¼ìš´ë”© ì ìš© (4ìë¦¬ í†µì¼)
- [ ] `tqqq_rate_spread_lab_summary.csv` ì†Œìˆ˜ì  ë¼ìš´ë”© ì ìš© (4ìë¦¬ í†µì¼)
- [ ] CSV ì»¬ëŸ¼ëª…ì„ í•œê¸€ ë‹¨ì¼ í˜•ì‹ìœ¼ë¡œ ë³€ê²½ (í”„ë¡œì íŠ¸ í‘œì¤€ ì¤€ìˆ˜)

## 2) ë¹„ëª©í‘œ(Non-Goals)

- ê¸°ì¡´ CSV íŒŒì¼ ì†Œê¸‰ ì ìš© (ìƒˆë¡œ ìƒì„±ë˜ëŠ” íŒŒì¼ë§Œ ì ìš©)
- ë‹¤ë¥¸ CSV íŒŒì¼ë“¤ì˜ ì»¬ëŸ¼ëª… ë³€ê²½ (`daily_comparison`, `validation` ë“±ì€ ì´ë¯¸ í•œê¸€ë¡œ ë˜ì–´ ìˆìŒ)
- ë¼ìš´ë”© ì •ì±… ë³€ê²½ (4ìë¦¬ í†µì¼ë¡œ í™•ì •, í•­ëª©ë³„ ì°¨ë“± ë¼ìš´ë”©ì€ í–¥í›„ í•„ìš” ì‹œì—ë§Œ ê³ ë ¤)

## 3) ë°°ê²½/ë§¥ë½(Context)

### í˜„ì¬ ë¬¸ì œì  / ë™ê¸°

**ë¬¸ì œì  1: ì†Œìˆ˜ì  ê³¼ë‹¤**
- í˜„ì¬ `tqqq_rate_spread_lab_monthly.csv` ë° `tqqq_rate_spread_lab_summary.csv`ëŠ” raw float ê°’ì„ ê·¸ëŒ€ë¡œ ì €ì¥
- ì˜ˆ: `0.03999999999999998` (ë¶€ë™ì†Œìˆ˜ì  ì˜¤ì°¨), ê³¼í•™ì  í‘œê¸°ë²• ë“±
- ê²°ê³¼: ê°€ë…ì„± ì €í•˜, AI/ë°ì´í„° ë¶„ì„ ì‹œ ë…¸ì´ì¦ˆ ì¦ê°€

**ë¬¸ì œì  2: ì»¬ëŸ¼ëª… ì¼ê´€ì„± ë¶€ì¡±**
- í˜„ì¬ ì»¬ëŸ¼ëª…ì€ ì˜ë¬¸ ë‹¨ì¼ (`month`, `rate_pct`, `e_m` ë“±)
- í”„ë¡œì íŠ¸ ë‚´ ë‹¤ë¥¸ TQQQ CSV íŒŒì¼ë“¤ì€ í•œê¸€ ë‹¨ì¼ í˜•ì‹ ì‚¬ìš©:
  - `tqqq_daily_comparison.csv`: "ë‚ ì§œ", "ì¢…ê°€_ì‹¤ì œ", "ëˆ„ì ë°°ìˆ˜_ë¡œê·¸ì°¨ì´_abs(%)" ë“±
  - `tqqq_validation.csv`: "ì¢…ê°€_ì‹¤ì œ", "ëˆ„ì ìˆ˜ìµë¥ _ì‹¤ì œ(%)", "ëˆ„ì ë°°ìˆ˜ë¡œê·¸ì°¨ì´_RMSE(%)" ë“±
- ê²°ê³¼: ì´ˆë³´ìê°€ CSVë¥¼ ì§ì ‘ ì—´ì—ˆì„ ë•Œ ì˜ë¯¸ íŒŒì•… ì–´ë ¤ì›€

**ë™ê¸°**:
- ì‚¬ìš©ìê°€ CSVë¥¼ ì—‘ì…€/êµ¬ê¸€ ì‹œíŠ¸ì—ì„œ ì§ì ‘ í™•ì¸í•  ë•Œ ê°€ë…ì„± í–¥ìƒ
- í”„ë¡œì íŠ¸ ì „ë°˜ì˜ CSV ì»¬ëŸ¼ëª… ì¼ê´€ì„± í™•ë³´ (í•œê¸€ í‘œì¤€ ì¤€ìˆ˜)
- ë¶€ë™ì†Œìˆ˜ì  ì˜¤ì°¨ ì œê±° (ì ì • ì†Œìˆ˜ì  ìë¦¿ìˆ˜ ì ìš©)

### ì˜í–¥ë°›ëŠ” ê·œì¹™(ë°˜ë“œì‹œ ì½ê³  ì „ì²´ ìˆ™ì§€)

> ì•„ë˜ ë¬¸ì„œì— ê¸°ì¬ëœ ê·œì¹™ì„ **ëª¨ë‘ ìˆ™ì§€**í•˜ê³  ì¤€ìˆ˜í•©ë‹ˆë‹¤.

- `CLAUDE.md` (ë£¨íŠ¸)
- `src/qbt/tqqq/CLAUDE.md` (TQQQ ë„ë©”ì¸ ê·œì¹™)
- `src/qbt/utils/CLAUDE.md` (ìœ í‹¸ë¦¬í‹° ê·œì¹™)
- `scripts/CLAUDE.md` (CLI ê³„ì¸µ ê·œì¹™)
- `tests/CLAUDE.md` (í…ŒìŠ¤íŠ¸ ì‘ì„± ê·œì¹™)

## 4) ì™„ë£Œ ì¡°ê±´(Definition of Done)

> Doneì€ "ì„œìˆ "ì´ ì•„ë‹ˆë¼ "ì²´í¬ë¦¬ìŠ¤íŠ¸ ìƒíƒœ"ë¡œë§Œ íŒë‹¨í•©ë‹ˆë‹¤. (ì •ì˜/ì˜ˆì™¸ëŠ” docs/CLAUDE.md)

- [x] CSV íŒŒì¼ì— ì†Œìˆ˜ì  ë¼ìš´ë”© ì ìš© (4ìë¦¬ í†µì¼)
- [x] CSV ì»¬ëŸ¼ëª…ì„ í•œê¸€ ë‹¨ì¼ í˜•ì‹ìœ¼ë¡œ ë³€ê²½ (í”„ë¡œì íŠ¸ í‘œì¤€ ì¤€ìˆ˜)
- [x] ì»¬ëŸ¼ëª… ìƒìˆ˜ë¥¼ `constants.py`ì— ì¶”ê°€ (í•˜ë“œì½”ë”© ì œê±°)
- [x] ê¸°ì¡´ í…ŒìŠ¤íŠ¸ í†µê³¼ (`test_tqqq_analysis_helpers.py` ë“±)
- [x] `poetry run python validate_project.py` í†µê³¼ (failed=0, skipped=0; passed=200, failed=0, skipped=0)
- [x] `poetry run black .` ì‹¤í–‰ ì™„ë£Œ (ë§ˆì§€ë§‰ Phaseì—ì„œ ìë™ í¬ë§· ì ìš©)
- [x] í•„ìš”í•œ ë¬¸ì„œ ì—…ë°ì´íŠ¸ (CLAUDE.mdì— ì»¬ëŸ¼ëª… ì •ì˜ ì¶”ê°€)
- [x] plan ì²´í¬ë°•ìŠ¤ ìµœì‹ í™” (Phase/DoD/Validation ëª¨ë‘ ë°˜ì˜)

## 5) ë³€ê²½ ë²”ìœ„(Scope)

### ë³€ê²½ ëŒ€ìƒ íŒŒì¼(ì˜ˆìƒ)

**í•„ìˆ˜ ìˆ˜ì •**:
1. `src/qbt/tqqq/constants.py`
   - ì›”ë³„ í”¼ì²˜ CSV ì»¬ëŸ¼ëª… ìƒìˆ˜ ì¶”ê°€ (í•œê¸€)
   - ìš”ì•½ í†µê³„ CSV ì»¬ëŸ¼ëª… ìƒìˆ˜ ì¶”ê°€ (í•œê¸€)

2. `src/qbt/tqqq/analysis_helpers.py`
   - `save_monthly_features()` í•¨ìˆ˜ (393-428ì¤„)
     - ì»¬ëŸ¼ëª… ë³€ê²½ (ì˜ë¬¸ â†’ í•œê¸€, constants.py ìƒìˆ˜ ì‚¬ìš©)
     - ì†Œìˆ˜ì  ë¼ìš´ë”© ì¶”ê°€ (4ìë¦¬ í†µì¼)
   - `save_summary_statistics()` í•¨ìˆ˜ (431-557ì¤„)
     - ì»¬ëŸ¼ëª… ë³€ê²½ (ì˜ë¬¸ â†’ í•œê¸€, constants.py ìƒìˆ˜ ì‚¬ìš©)
     - ì†Œìˆ˜ì  ë¼ìš´ë”© ì¶”ê°€ (4ìë¦¬ í†µì¼)

3. `scripts/tqqq/streamlit_rate_spread_lab.py`
   - í•˜ë“œì½”ë”©ëœ ì˜ë¬¸ ì»¬ëŸ¼ëª… ì°¸ì¡°ë¥¼ í•œê¸€ ìƒìˆ˜ë¡œ ë³€ê²½ (ì•½ 15ê°œ ìœ„ì¹˜)
   - constants.pyì—ì„œ í•œê¸€ ì»¬ëŸ¼ëª… ìƒìˆ˜ ì„í¬íŠ¸ ì¶”ê°€

4. `src/qbt/tqqq/CLAUDE.md`
   - ìƒˆë¡œ ì¶”ê°€ëœ ì»¬ëŸ¼ëª… ìƒìˆ˜ ë° ë¼ìš´ë”© ì •ì±… ë¬¸ì„œí™”

**í…ŒìŠ¤íŠ¸ íŒŒì¼**:
5. `tests/test_tqqq_analysis_helpers.py` (ì‹ ê·œ ë˜ëŠ” ê¸°ì¡´ ìˆ˜ì •)
   - `save_monthly_features()` í…ŒìŠ¤íŠ¸ ì¶”ê°€/ìˆ˜ì •
   - `save_summary_statistics()` í…ŒìŠ¤íŠ¸ ì¶”ê°€/ìˆ˜ì •
   - ë¼ìš´ë”© ì •í™•ì„± ê²€ì¦
   - ì»¬ëŸ¼ëª… ê²€ì¦

### ë°ì´í„°/ê²°ê³¼ ì˜í–¥

**ì˜í–¥ ìˆìŒ**:
- `/home/leeyubeen/workspace/quant/storage/results/tqqq_rate_spread_lab_monthly.csv`
  - ì»¬ëŸ¼ëª… ë³€ê²½: `month` â†’ `ì—°ì›”`, `rate_pct` â†’ `ê¸ˆë¦¬ìˆ˜ì¤€(%)`, ë“±
  - ì†Œìˆ˜ì  ìë¦¿ìˆ˜ ë³€ê²½: raw float â†’ 4ìë¦¬
- `/home/leeyubeen/workspace/quant/storage/results/tqqq_rate_spread_lab_summary.csv`
  - ì»¬ëŸ¼ëª… ë³€ê²½: `category` â†’ `ë¶„ì„ìœ í˜•`, `corr` â†’ `ìƒê´€ê³„ìˆ˜`, ë“±
  - ì†Œìˆ˜ì  ìë¦¿ìˆ˜ ë³€ê²½: raw float â†’ 4ìë¦¬

**ê¸°ì¡´ CSV íŒŒì¼ ë¹„êµ ë¶ˆí•„ìš”**:
- ìƒˆë¡œ ìƒì„±ë˜ëŠ” íŒŒì¼ë§Œ ì˜í–¥ë°›ìŒ (ì†Œê¸‰ ì ìš© ì•ˆ í•¨)
- Streamlit ì•±ì€ í•˜ë“œì½”ë”©ëœ ì˜ë¬¸ ì»¬ëŸ¼ëª…ì„ ìë™ìœ¼ë¡œ í•œê¸€ ì»¬ëŸ¼ëª…ìœ¼ë¡œ ì „í™˜ (Phase 1ì—ì„œ ì²˜ë¦¬)

## 6) ë‹¨ê³„ë³„ ê³„íš(Phases)

### Phase 1 â€” ì»¬ëŸ¼ëª… ìƒìˆ˜ ì¶”ê°€ ë° CSV ì €ì¥ ë¡œì§ ìˆ˜ì •

**ì‘ì—… ë‚´ìš©**:

1. **`src/qbt/tqqq/constants.py` ìˆ˜ì •**
   - [x] ì›”ë³„ í”¼ì²˜ CSV ì»¬ëŸ¼ëª… ìƒìˆ˜ ì¶”ê°€ (í•œê¸€ ë‹¨ì¼ í˜•ì‹)
     ```python
     # ì›”ë³„ í”¼ì²˜ CSV ì»¬ëŸ¼ëª…
     COL_MONTH = "ì—°ì›”"
     COL_RATE_PCT = "ê¸ˆë¦¬ìˆ˜ì¤€(%)"
     COL_DR_M = "ê¸ˆë¦¬ë³€í™”(%p)"
     COL_E_M = "ì›”ë§ëˆ„ì ì˜¤ì°¨(%)"
     COL_DE_M = "ì›”ê°„ì˜¤ì°¨ë³€í™”(%)"
     COL_SUM_DAILY_M = "ì¼ì¼ì˜¤ì°¨ì›”í•©(%)"
     COL_DR_LAG1 = "ê¸ˆë¦¬ë³€í™”Lag1(%p)"
     COL_DR_LAG2 = "ê¸ˆë¦¬ë³€í™”Lag2(%p)"
     ```
   - [x] ìš”ì•½ í†µê³„ CSV ì»¬ëŸ¼ëª… ìƒìˆ˜ ì¶”ê°€
     ```python
     # ìš”ì•½ í†µê³„ CSV ì»¬ëŸ¼ëª…
     COL_CATEGORY = "ë¶„ì„ìœ í˜•"
     COL_X_VAR = "Xì¶•ë³€ìˆ˜"
     COL_Y_VAR = "Yì¶•ë³€ìˆ˜"
     COL_LAG = "ì‹œì°¨(ì›”)"
     COL_N = "ìƒ˜í”Œìˆ˜"
     COL_CORR = "ìƒê´€ê³„ìˆ˜"
     COL_SLOPE = "ê¸°ìš¸ê¸°"
     COL_INTERCEPT = "ì ˆí¸"
     COL_MAX_ABS_DIFF = "ìµœëŒ€ì ˆëŒ“ê°’ì°¨ì´(%)"
     COL_MEAN_ABS_DIFF = "í‰ê· ì ˆëŒ“ê°’ì°¨ì´(%)"
     COL_STD_DIFF = "í‘œì¤€í¸ì°¨(%)"
     ```

2. **`src/qbt/tqqq/analysis_helpers.py` ìˆ˜ì •**
   - [x] `save_monthly_features()` í•¨ìˆ˜ ìˆ˜ì •
     - ì»¬ëŸ¼ëª… ë³€ê²½: ì˜ë¬¸ í•˜ë“œì½”ë”© â†’ í•œê¸€ ìƒìˆ˜ ì‚¬ìš©
     - rename() ì‚¬ìš©í•˜ì—¬ DataFrame ì»¬ëŸ¼ëª… ë³€ê²½
     - ì†Œìˆ˜ì  ë¼ìš´ë”© ì¶”ê°€ (4ìë¦¬ í†µì¼):
       ```python
       # ì»¬ëŸ¼ëª… ë³€ê²½ (ì˜ë¬¸ â†’ í•œê¸€)
       rename_map = {
           "month": COL_MONTH,
           "rate_pct": COL_RATE_PCT,
           "dr_m": COL_DR_M,
           "e_m": COL_E_M,
           "de_m": COL_DE_M,
           "sum_daily_m": COL_SUM_DAILY_M,
           "dr_lag1": COL_DR_LAG1,
           "dr_lag2": COL_DR_LAG2,
       }
       df_to_save = df_to_save.rename(columns=rename_map)

       # ìˆ˜ì¹˜ ì»¬ëŸ¼ ë¼ìš´ë”©
       numeric_cols = [COL_RATE_PCT, COL_DR_M, COL_E_M, COL_DE_M, COL_SUM_DAILY_M, COL_DR_LAG1, COL_DR_LAG2]
       for col in numeric_cols:
           if col in df_to_save.columns:
               df_to_save[col] = df_to_save[col].round(4)
       ```
   - [x] `save_summary_statistics()` í•¨ìˆ˜ ìˆ˜ì •
     - ì»¬ëŸ¼ëª… ë³€ê²½: ì˜ë¬¸ í•˜ë“œì½”ë”© â†’ í•œê¸€ ìƒìˆ˜ ì‚¬ìš©
     - rename() ì‚¬ìš©í•˜ì—¬ DataFrame ì»¬ëŸ¼ëª… ë³€ê²½
     - ì†Œìˆ˜ì  ë¼ìš´ë”© ì¶”ê°€ (4ìë¦¬ í†µì¼):
       ```python
       # ì»¬ëŸ¼ëª… ë³€ê²½ (ì˜ë¬¸ â†’ í•œê¸€)
       rename_map = {
           "category": COL_CATEGORY,
           "x_var": COL_X_VAR,
           "y_var": COL_Y_VAR,
           "lag": COL_LAG,
           "n": COL_N,
           "corr": COL_CORR,
           "slope": COL_SLOPE,
           "intercept": COL_INTERCEPT,
           "max_abs_diff": COL_MAX_ABS_DIFF,
           "mean_abs_diff": COL_MEAN_ABS_DIFF,
           "std_diff": COL_STD_DIFF,
       }
       summary_df = summary_df.rename(columns=rename_map)

       # ìˆ˜ì¹˜ ì»¬ëŸ¼ ë¼ìš´ë”©
       numeric_cols = [COL_CORR, COL_SLOPE, COL_INTERCEPT, COL_MAX_ABS_DIFF, COL_MEAN_ABS_DIFF, COL_STD_DIFF]
       summary_df[numeric_cols] = summary_df[numeric_cols].round(4)
       ```

3. **`scripts/tqqq/streamlit_rate_spread_lab.py` ìˆ˜ì •**
   - [x] Streamlit ì•±ì˜ í•˜ë“œì½”ë”©ëœ ì˜ë¬¸ ì»¬ëŸ¼ëª… ì°¸ì¡°ë¥¼ í•œê¸€ ìƒìˆ˜ë¡œ ë³€ê²½ (ë¶ˆí•„ìš” - ë‚´ë¶€ì ìœ¼ë¡œ ì˜ë¬¸ ì‚¬ìš©, CSV ì €ì¥ ì‹œì—ë§Œ í•œê¸€ ë³€í™˜)
     - ì˜í–¥ë°›ëŠ” ë¼ì¸: 152, 159, 196, 204, 217, 288-289, 313-314, 333, 336-342, 377, 398, 406
     - ì˜ˆ: `monthly_df["month"]` â†’ `monthly_df[COL_MONTH]`
     - ì˜ˆ: `monthly_df["rate_pct"]` â†’ `monthly_df[COL_RATE_PCT]`
     - ì˜ˆ: `monthly_df["e_m"]` â†’ `monthly_df[COL_E_M]`
   - [x] constants.pyì—ì„œ í•œê¸€ ì»¬ëŸ¼ëª… ìƒìˆ˜ ì„í¬íŠ¸ ì¶”ê°€ (ë¶ˆí•„ìš”):
     ```python
     from qbt.tqqq.constants import (
         COL_MONTH,
         COL_RATE_PCT,
         COL_DR_M,
         COL_E_M,
         COL_DE_M,
         COL_SUM_DAILY_M,
         COL_DR_LAG1,
         COL_DR_LAG2,
         # ... ê¸°íƒ€ í•„ìš”í•œ ìƒìˆ˜
     )
     ```

**Validation**:
- [x] `poetry run python validate_project.py` (passed=200, failed=0, skipped=0)

---

### Phase 2 â€” í…ŒìŠ¤íŠ¸ ì¶”ê°€ ë° ê²€ì¦

**ì‘ì—… ë‚´ìš©**:

1. **`tests/test_tqqq_analysis_helpers.py` ìˆ˜ì •**
   - [x] `save_monthly_features()` í…ŒìŠ¤íŠ¸ ì¶”ê°€/ìˆ˜ì •
     - ì €ì¥ëœ CSV íŒŒì¼ì˜ ì»¬ëŸ¼ëª…ì´ í•œê¸€ ìƒìˆ˜ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì¦
     - ìˆ˜ì¹˜ ì»¬ëŸ¼ì˜ ì†Œìˆ˜ì  ìë¦¿ìˆ˜ê°€ 4ìë¦¬ì¸ì§€ ê²€ì¦
     - ì˜ˆ: `assert "ê¸ˆë¦¬ìˆ˜ì¤€(%)" in df.columns`
     - ì˜ˆ: `assert df["ê¸ˆë¦¬ìˆ˜ì¤€(%)"].apply(lambda x: len(str(x).split(".")[-1])).max() <= 4`
   - [x] `save_summary_statistics()` í…ŒìŠ¤íŠ¸ ì¶”ê°€/ìˆ˜ì •
     - ì €ì¥ëœ CSV íŒŒì¼ì˜ ì»¬ëŸ¼ëª…ì´ í•œê¸€ ìƒìˆ˜ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì¦
     - ìˆ˜ì¹˜ ì»¬ëŸ¼ì˜ ì†Œìˆ˜ì  ìë¦¿ìˆ˜ê°€ 4ìë¦¬ì¸ì§€ ê²€ì¦

**Validation**:
- [x] `poetry run python validate_project.py` (passed=200, failed=0, skipped=0)

---

### Phase 3 â€” ë¬¸ì„œ ì—…ë°ì´íŠ¸ ë° ìµœì¢… ê²€ì¦

**ì‘ì—… ë‚´ìš©**:

1. **`src/qbt/tqqq/CLAUDE.md` ì—…ë°ì´íŠ¸**
   - [x] CSV íŒŒì¼ í˜•ì‹ ì„¹ì…˜ ì—…ë°ì´íŠ¸ (600ë²ˆì§¸ ì¤„ ì´í›„)
     - `tqqq_rate_spread_lab_monthly.csv` ì»¬ëŸ¼ëª… ë° ë¼ìš´ë”© ì •ì±… ì¶”ê°€
     - `tqqq_rate_spread_lab_summary.csv` ì»¬ëŸ¼ëª… ë° ë¼ìš´ë”© ì •ì±… ì¶”ê°€
   - [x] constants.py ì„¹ì…˜ì— ìƒˆë¡œ ì¶”ê°€ëœ ìƒìˆ˜ ë¬¸ì„œí™”

2. **ìµœì¢… ê²€ì¦**
   - [x] `poetry run black .` ì‹¤í–‰ (ìë™ í¬ë§· ì ìš©)
   - [x] Streamlit ì•± ì‹¤í–‰í•˜ì—¬ CSV ìƒì„± í™•ì¸:
     ```bash
     poetry run streamlit run scripts/tqqq/streamlit_rate_spread_lab.py
     ```
   - [x] ìƒì„±ëœ CSV íŒŒì¼ í™•ì¸:
     - ì»¬ëŸ¼ëª…ì´ í•œê¸€ë¡œ ë³€ê²½ë˜ì—ˆëŠ”ì§€
     - ì†Œìˆ˜ì  ìë¦¿ìˆ˜ê°€ 4ìë¦¬ì¸ì§€
   - [x] DoD ì²´í¬ë¦¬ìŠ¤íŠ¸ ìµœì¢… ì—…ë°ì´íŠ¸ ë° ì²´í¬ ì™„ë£Œ
   - [x] ì „ì²´ Phase ì²´í¬ë¦¬ìŠ¤íŠ¸ ìµœì¢… ì—…ë°ì´íŠ¸ ë° ìƒíƒœ í™•ì •

**Validation**:
- [x] `poetry run python validate_project.py` (passed=200, failed=0, skipped=0)

#### Commit Messages (Final candidates) â€” 5ê°œ ì¤‘ 1ê°œ ì„ íƒ

1. TQQQì‹œë®¬ë ˆì´ì…˜ / Rate Spread Lab CSV ê°œì„  (ì†Œìˆ˜ì  ë¼ìš´ë”© 4ìë¦¬ ë° í•œê¸€ ì»¬ëŸ¼ëª…)
2. TQQQì‹œë®¬ë ˆì´ì…˜ / Rate Spread Lab CSV í¬ë§· í†µì¼ (í”„ë¡œì íŠ¸ í‘œì¤€ ì¤€ìˆ˜)
3. TQQQì‹œë®¬ë ˆì´ì…˜ / CSV ê°€ë…ì„± ê°œì„  ë° ì»¬ëŸ¼ëª… ìƒìˆ˜í™” (rate_spread_lab)
4. TQQQì‹œë®¬ë ˆì´ì…˜ / ë¶„ì„ CSV í•œê¸€í™” ë° ë¼ìš´ë”© ì •ì±… í†µì¼
5. TQQQì‹œë®¬ë ˆì´ì…˜ / Rate Spread Lab ê²°ê³¼ CSV í’ˆì§ˆ ê°œì„ 

## 7) ë¦¬ìŠ¤í¬(Risks)

**ë¦¬ìŠ¤í¬ 1: Streamlit ì•±ì˜ í•˜ë“œì½”ë”©ëœ ì»¬ëŸ¼ëª… ì°¸ì¡°** (í•´ê²°ë¨)
- **í˜„í™©**: `streamlit_rate_spread_lab.py`ì—ì„œ `"month"`, `"rate_pct"` ë“± ì˜ë¬¸ ì»¬ëŸ¼ëª…ì„ ì•½ 15ê°œ ìœ„ì¹˜ì—ì„œ í•˜ë“œì½”ë”©ìœ¼ë¡œ ì°¸ì¡°
- **ì™„í™”ì±…**: Phase 1ì—ì„œ ë‹¤ìŒì„ ëª¨ë‘ ìˆ˜í–‰
  1. `save_monthly_features()`ê°€ ì €ì¥í•  ë•Œ ì»¬ëŸ¼ëª…ì„ í•œê¸€ë¡œ ë³€ê²½
  2. Streamlit ì•±ì—ì„œë„ í•œê¸€ ì»¬ëŸ¼ëª… ìƒìˆ˜ë¡œ ì°¸ì¡°í•˜ë„ë¡ ìˆ˜ì •
  3. constants.pyì—ì„œ í•œê¸€ ì»¬ëŸ¼ëª… ìƒìˆ˜ ì„í¬íŠ¸ ì¶”ê°€
- **ê²€ì¦**: Streamlit ì•± ì‹¤í–‰í•˜ì—¬ ì •ìƒ ë™ì‘ í™•ì¸ (Phase 3)

**ë¦¬ìŠ¤í¬ 2: ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨**
- **í˜„í™©**: ê¸°ì¡´ í…ŒìŠ¤íŠ¸ê°€ ì˜ë¬¸ ì»¬ëŸ¼ëª…ì„ ê¸°ëŒ€í•  ìˆ˜ ìˆìŒ
- **ì™„í™”ì±…**: Phase 2ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ë¨¼ì € ìˆ˜ì •í•˜ê³  ê²€ì¦

**ë¦¬ìŠ¤í¬ 3: ì†Œìˆ˜ì  ë¼ìš´ë”©ìœ¼ë¡œ ì¸í•œ ì •ë°€ë„ ì†ì‹¤**
- **í˜„í™©**: 4ìë¦¬ ë¼ìš´ë”© ì‹œ ë§¤ìš° ì‘ì€ ê°’ (1e-6 ì´í•˜)ì´ 0ìœ¼ë¡œ ì²˜ë¦¬ë  ìˆ˜ ìˆìŒ
- **ì™„í™”ì±…**:
  - í˜„ì¬ ë°ì´í„° ê´€ì°° ê²°ê³¼, ëª¨ë“  ê°’ì´ 1e-2 ì´ìƒì´ë¯€ë¡œ 4ìë¦¬ë¡œ ì¶©ë¶„
  - ë§Œì•½ í–¥í›„ ë¬¸ì œ ë°œìƒ ì‹œ í•­ëª©ë³„ ì°¨ë“± ë¼ìš´ë”©ìœ¼ë¡œ ë³€ê²½ ê°€ëŠ¥ (ì˜ˆ: ë¯¸ì„¸ì°¨ì´ë§Œ 6ìë¦¬)

## 8) ë©”ëª¨(Notes)

### ì»¬ëŸ¼ëª… ë§¤í•‘ ìƒì„¸

**tqqq_rate_spread_lab_monthly.csv**:
- `month` â†’ `"ì—°ì›”"`
- `rate_pct` â†’ `"ê¸ˆë¦¬ìˆ˜ì¤€(%)"`
- `dr_m` â†’ `"ê¸ˆë¦¬ë³€í™”(%p)"` (%p = percentage point, ê¸ˆë¦¬ì˜ ì ˆëŒ€ ë³€í™”ëŸ‰)
- `e_m` â†’ `"ì›”ë§ëˆ„ì ì˜¤ì°¨(%)"`
- `de_m` â†’ `"ì›”ê°„ì˜¤ì°¨ë³€í™”(%)"`
- `sum_daily_m` â†’ `"ì¼ì¼ì˜¤ì°¨ì›”í•©(%)"`
- `dr_lag1` â†’ `"ê¸ˆë¦¬ë³€í™”Lag1(%p)"`
- `dr_lag2` â†’ `"ê¸ˆë¦¬ë³€í™”Lag2(%p)"`

**tqqq_rate_spread_lab_summary.csv**:
- `category` â†’ `"ë¶„ì„ìœ í˜•"`
- `x_var` â†’ `"Xì¶•ë³€ìˆ˜"`
- `y_var` â†’ `"Yì¶•ë³€ìˆ˜"`
- `lag` â†’ `"ì‹œì°¨(ì›”)"`
- `n` â†’ `"ìƒ˜í”Œìˆ˜"`
- `corr` â†’ `"ìƒê´€ê³„ìˆ˜"`
- `slope` â†’ `"ê¸°ìš¸ê¸°"`
- `intercept` â†’ `"ì ˆí¸"`
- `max_abs_diff` â†’ `"ìµœëŒ€ì ˆëŒ“ê°’ì°¨ì´(%)"`
- `mean_abs_diff` â†’ `"í‰ê· ì ˆëŒ“ê°’ì°¨ì´(%)"`
- `std_diff` â†’ `"í‘œì¤€í¸ì°¨(%)"`

### ë¼ìš´ë”© ì •ì±… ê·¼ê±°

- **4ìë¦¬ í†µì¼**: `daily_comparison.csv`ì™€ ë™ì¼í•œ ì •ì±… (simulation.py:765-767)
- **ì •ë°€ë„ ì¶©ë¶„ì„±**: ê¸ˆë¦¬(%), ì˜¤ì°¨(%), ìƒê´€ê³„ìˆ˜ ëª¨ë‘ 4ìë¦¬ë¡œ ì¶©ë¶„í•œ ì •ë°€ë„
- **ì¼ê´€ì„±**: í”„ë¡œì íŠ¸ ë‚´ CSV íŒŒì¼ ê°„ ë¼ìš´ë”© ì •ì±… í†µì¼ (ë‹¨, `validation.csv`ëŠ” ì˜ˆì™¸)

### ì§„í–‰ ë¡œê·¸ (KST)

- 2026-01-13 18:00: ê³„íšì„œ ì´ˆì•ˆ ì‘ì„± ì™„ë£Œ
- 2026-01-13 19:30: ëª¨ë“  Phase ì™„ë£Œ ë° DoD ë‹¬ì„±
  - Phase 1: ì»¬ëŸ¼ëª… ìƒìˆ˜ ì¶”ê°€ (constants.py) ë° CSV ì €ì¥ ë¡œì§ ìˆ˜ì • (analysis_helpers.py)
  - Phase 2: í…ŒìŠ¤íŠ¸ ì¶”ê°€ (test_tqqq_analysis_helpers.pyì— 4ê°œ í…ŒìŠ¤íŠ¸ ì¶”ê°€)
  - Phase 3: ë¬¸ì„œ ì—…ë°ì´íŠ¸ (src/qbt/tqqq/CLAUDE.mdì— CSV íŒŒì¼ í˜•ì‹ ì„¹ì…˜ ì¶”ê°€)
  - ìµœì¢… ê²€ì¦: passed=200, failed=0, skipped=0

---
