# Implementation Plan: ì›Œí¬í¬ì›Œë“œ ê²€ì¦ (60m Train / 1m Test) êµ¬í˜„

> ì‘ì„±/ìš´ì˜ ê·œì¹™(SoT): ë°˜ë“œì‹œ [docs/CLAUDE.md](../CLAUDE.md)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.
> (ì´ í…œí”Œë¦¿ì„ ìˆ˜ì •í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ì–‘ì‹ì˜ ê³„íšì„œë¥¼ ë§Œë“¤ ë•Œë„ [docs/CLAUDE.md](../CLAUDE.md)ë¥¼ í¬ì¸í„°ë¡œ ë‘ê³  ì¤€ìˆ˜í•©ë‹ˆë‹¤.)

**ìƒíƒœ**: ğŸŸ¡ Draft

---

ğŸš« **ì´ ì˜ì—­ì€ ì‚­ì œ/ìˆ˜ì • ê¸ˆì§€** ğŸš«

**ìƒíƒœ ì˜µì…˜**: ğŸŸ¡ Draft / ğŸ”„ In Progress / âœ… Done

**Done ì²˜ë¦¬ ê·œì¹™**:

- âœ… Done ì¡°ê±´: DoD ëª¨ë‘ [x] + `skipped=0` + `failed=0`
- âš ï¸ **ìŠ¤í‚µì´ 1ê°œë¼ë„ ì¡´ì¬í•˜ë©´ Done ì²˜ë¦¬ ê¸ˆì§€ + DoD í…ŒìŠ¤íŠ¸ í•­ëª© ì²´í¬ ê¸ˆì§€**
- ìƒì„¸: [docs/CLAUDE.md](../CLAUDE.md) ì„¹ì…˜ 3, 5 ì°¸ê³ 

---

**ì‘ì„±ì¼**: 2026-01-21 15:30
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2026-01-21 15:30
**ê´€ë ¨ ë²”ìœ„**: tqqq, scripts/tqqq, utils
**ê´€ë ¨ ë¬¸ì„œ**: src/qbt/tqqq/CLAUDE.md, scripts/CLAUDE.md, tests/CLAUDE.md

---

## 0) ê³ ì • ê·œì¹™ (ì´ planì€ ë°˜ë“œì‹œ ì•„ë˜ ê·œì¹™ì„ ë”°ë¥¸ë‹¤)

> ğŸš« **ì´ ì˜ì—­ì€ ì‚­ì œ/ìˆ˜ì • ê¸ˆì§€** ğŸš«
> ì´ ì„¹ì…˜(0)ì€ ì§€ì›Œì§€ë©´ ì•ˆ ë  ë¿ë§Œ ì•„ë‹ˆë¼ **ë¬¸êµ¬ê°€ ìˆ˜ì •ë˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.**
> ê·œì¹™ì˜ ìƒì„¸ ì •ì˜/ì˜ˆì™¸ëŠ” ë°˜ë“œì‹œ [docs/CLAUDE.md](../CLAUDE.md)ë¥¼ ë”°ë¦…ë‹ˆë‹¤.

- Validationì—ì„œ `poetry run python validate_project.py`ê°€ ì‹¤íŒ¨í•˜ë©´ **í•´ë‹¹ Phaseì—ì„œ ì¦‰ì‹œ ìˆ˜ì • í›„ ì¬ê²€ì¦**í•œë‹¤.
- Phase 0ì€ "ë ˆë“œ(ì˜ë„ì  ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸)" í—ˆìš©, Phase 1ë¶€í„°ëŠ” **ê·¸ë¦° ìœ ì§€**ë¥¼ ì›ì¹™ìœ¼ë¡œ í•œë‹¤.
- ì´ë¯¸ ìƒì„±ëœ planì€ **ì²´í¬ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ ì™¸ ìˆ˜ì • ê¸ˆì§€**í•œë‹¤.
- ìŠ¤í‚µì€ ê°€ëŠ¥í•˜ë©´ **Phase ë¶„í•´ë¡œ ì œê±°**í•œë‹¤.

---

## 1) ëª©í‘œ(Goal)

- [ ] ëª©í‘œ 1: ì›Œí¬í¬ì›Œë“œ ê²€ì¦ ë¡œì§ êµ¬í˜„ (60ê°œì›” Train, 1ê°œì›” Test)
- [ ] ëª©í‘œ 2: ì›Œí¬í¬ì›Œë“œ íŠœë‹ ë°©ì‹ êµ¬í˜„ (ì²« êµ¬ê°„ 2-stage, ì´í›„ local refine)
- [ ] ëª©í‘œ 3: ì›Œí¬í¬ì›Œë“œ CSV ì‚°ì¶œë¬¼ ìƒì„± (walkforward.csv, walkforward_summary.csv)
- [ ] ëª©í‘œ 4: Streamlit ì•±ì—ì„œ ì›Œí¬í¬ì›Œë“œ ê¸°ë³¸ ì‹¤í–‰ (í† ê¸€/ë²„íŠ¼ ì—†ì´ í•­ìƒ ì‹¤í–‰)
- [ ] ëª©í‘œ 5: meta.jsonì— ì›Œí¬í¬ì›Œë“œ ê´€ë ¨ ë©”íƒ€ ê¸°ë¡
- [ ] ëª©í‘œ 6: ì™„ë£Œ ë³´ê³  (RMSE ìš”ì•½, (a,b) ì•ˆì •ì„±, ì‹¤í–‰ì‹œê°„, ì‚°ì¶œë¬¼ í™•ì¸)

## 2) ë¹„ëª©í‘œ(Non-Goals)

- ê¸°ì¡´ ê³ ì • spread ëª¨ë“œ ë³€ê²½: ê¸°ì¡´ ë™ì‘ ì™„ì „ ìœ ì§€
- ê¸°ì¡´ 3ê°œ CSV ìŠ¤í‚¤ë§ˆ ë³€ê²½: ìœ ì§€
- Streamlit UIì—ì„œ ì›Œí¬í¬ì›Œë“œ í† ê¸€/ë²„íŠ¼ ì¶”ê°€: í”„ë¡¬í”„íŠ¸ ìš”êµ¬ì— ë”°ë¼ ê¸°ë³¸ ì‹¤í–‰
- ë³‘ë ¬ ì²˜ë¦¬ ìµœì í™”: ì¶”í›„ ê°œì„  ê°€ëŠ¥ (ì´ë²ˆ êµ¬í˜„ì—ì„œëŠ” ê¸°ë³¸ ë³‘ë ¬ ì²˜ë¦¬ ìœ ì§€)

## 3) ë°°ê²½/ë§¥ë½(Context)

### í˜„ì¬ ë¬¸ì œì  / ë™ê¸°

- **í”„ë¡¬í”„íŠ¸ 1 ì™„ë£Œ**: ë™ì  funding_spread, softplus ëª¨ë¸, ê¸€ë¡œë²Œ (a,b) íŠœë‹ êµ¬í˜„ ì™„ë£Œ
- **í•„ìš”ì„±**: ê¸€ë¡œë²Œ ìµœì  (a,b)ê°€ ë¯¸ë˜ ë°ì´í„°ì—ë„ ì•ˆì •ì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ ê²€ì¦ í•„ìš”
- **ì›Œí¬í¬ì›Œë“œ ëª©ì **: íŒŒë¼ë¯¸í„° ì•ˆì •ì„±/ì¼ë°˜í™” ì²´í¬ (ë¯¸ë˜ì˜ˆì¸¡ OOSê°€ ì•„ë‹˜)
- **Aì•ˆ í™•ì •**: ì›Œí¬í¬ì›Œë“œì—ì„œë„ í…ŒìŠ¤íŠ¸ ì›” spread ê³„ì‚°ì— í•´ë‹¹ì›” FFR(ì›”ê°’) ì‚¬ìš©

### í•µì‹¬ ì„¤ì • (í”„ë¡¬í”„íŠ¸ì—ì„œ í™•ì •)

1. **Train window**: 60ê°œì›” (5ë…„)
2. **Test step**: 1ê°œì›”
3. **ì›Œí¬í¬ì›Œë“œ ì‹œì‘ì **: 60ê°œì›” í•™ìŠµì´ ê°€ëŠ¥í•œ ì²« ë‹¬ë¶€í„° ìë™ ì‹œì‘
4. **íŠœë‹ ë°©ì‹**:
   - ì²« ì›Œí¬í¬ì›Œë“œ êµ¬ê°„: 2-stage grid search (í”„ë¡¬í”„íŠ¸ 1ì˜ ë²”ìœ„)
   - ì´í›„ êµ¬ê°„: local refine (ì§ì „ ì›” ìµœì ê°’ ì£¼ë³€)
     - a in [a_prev - 0.50, a_prev + 0.50] step 0.05
     - b in [b_prev - 0.15, b_prev + 0.15] step 0.02
5. **ëª©ì í•¨ìˆ˜**: `cumul_multiple_log_diff_rmse_pct` ìµœì†Œí™”
6. **Fail-fast**: ê²°ì¸¡/ëˆ„ë½/NaN/infëŠ” ì¦‰ì‹œ ì˜ˆì™¸

### ì‚¬ìš©ì í™•ì¸ ê²°ê³¼ (Streamlit ì •ì±…)

- **ê¸°ë³¸ ì‹¤í–‰**: ê¶Œì¥ ë°©í–¥ëŒ€ë¡œ ì›Œí¬í¬ì›Œë“œ í•­ìƒ ì‹¤í–‰
- **ì¶”í›„ ë³€ê²½ ê°€ëŠ¥ì„±**: ë³‘ë ¬ ì²˜ë¦¬ ìµœì í™”, ë²„íŠ¼ í´ë¦­ ë°©ì‹ìœ¼ë¡œ ë³€ê²½ ê°€ëŠ¥
- **ì„¤ê³„ ê³ ë ¤**: ì¶”í›„ ë³€ê²½ì— ëŒ€ë¹„í•˜ì—¬ ë¡œì§ì„ ëª¨ë“ˆí™”

### ì˜í–¥ë°›ëŠ” ê·œì¹™(ë°˜ë“œì‹œ ì½ê³  ì „ì²´ ìˆ™ì§€)

> ì•„ë˜ ë¬¸ì„œì— ê¸°ì¬ëœ ê·œì¹™ì„ **ëª¨ë‘ ìˆ™ì§€**í•˜ê³  ì¤€ìˆ˜í•©ë‹ˆë‹¤.

- `CLAUDE.md` (ë£¨íŠ¸)
- `src/qbt/tqqq/CLAUDE.md` (TQQQ ì‹œë®¬ë ˆì´ì…˜ ë„ë©”ì¸)
- `src/qbt/utils/CLAUDE.md` (ìœ í‹¸ë¦¬í‹°)
- `scripts/CLAUDE.md` (CLI ìŠ¤í¬ë¦½íŠ¸)
- `tests/CLAUDE.md` (í…ŒìŠ¤íŠ¸)

## 4) ì™„ë£Œ ì¡°ê±´(Definition of Done)

> Doneì€ "ì„œìˆ "ì´ ì•„ë‹ˆë¼ "ì²´í¬ë¦¬ìŠ¤íŠ¸ ìƒíƒœ"ë¡œë§Œ íŒë‹¨í•©ë‹ˆë‹¤. (ì •ì˜/ì˜ˆì™¸ëŠ” docs/CLAUDE.md)

- [ ] ì›Œí¬í¬ì›Œë“œ ê²€ì¦ ë¡œì§ êµ¬í˜„ ë° ë™ì‘ í™•ì¸
- [ ] ì›Œí¬í¬ì›Œë“œ CSV ì‚°ì¶œë¬¼ ìƒì„± (2ê°œ íŒŒì¼)
- [ ] Streamlit ì•±ì—ì„œ ì›Œí¬í¬ì›Œë“œ ê¸°ë³¸ ì‹¤í–‰ ë™ì‘ í™•ì¸
- [ ] meta.jsonì— ì›Œí¬í¬ì›Œë“œ ë©”íƒ€ ê¸°ë¡ í™•ì¸
- [ ] íšŒê·€/ì‹ ê·œ í…ŒìŠ¤íŠ¸ ì¶”ê°€
- [ ] `poetry run python validate_project.py` í†µê³¼ (failed=0, skipped=0)
- [ ] `poetry run black .` ì‹¤í–‰ ì™„ë£Œ (ë§ˆì§€ë§‰ Phaseì—ì„œ ìë™ í¬ë§· ì ìš©)
- [ ] plan ì²´í¬ë°•ìŠ¤ ìµœì‹ í™”(Phase/DoD/Validation ëª¨ë‘ ë°˜ì˜)

## 5) ë³€ê²½ ë²”ìœ„(Scope)

### ë³€ê²½ ëŒ€ìƒ íŒŒì¼(ì˜ˆìƒ)

**í•µì‹¬ êµ¬í˜„:**
- `src/qbt/tqqq/simulation.py`: ì›Œí¬í¬ì›Œë“œ ê²€ì¦ í•¨ìˆ˜ ì¶”ê°€
  - `run_walkforward_validation()`: ì›Œí¬í¬ì›Œë“œ ë©”ì¸ í•¨ìˆ˜
  - `_local_refine_search()`: local refine íƒìƒ‰ í—¬í¼
- `src/qbt/tqqq/constants.py`: ì›Œí¬í¬ì›Œë“œ ê´€ë ¨ ìƒìˆ˜ ì¶”ê°€
  - `DEFAULT_TRAIN_WINDOW_MONTHS = 60`
  - `DEFAULT_TEST_STEP_MONTHS = 1`
  - `WALKFORWARD_LOCAL_REFINE_A_DELTA = 0.50`
  - `WALKFORWARD_LOCAL_REFINE_A_STEP = 0.05`
  - `WALKFORWARD_LOCAL_REFINE_B_DELTA = 0.15`
  - `WALKFORWARD_LOCAL_REFINE_B_STEP = 0.02`
  - `TQQQ_WALKFORWARD_PATH`, `TQQQ_WALKFORWARD_SUMMARY_PATH`

**Streamlit ì•±:**
- `scripts/tqqq/streamlit_rate_spread_lab.py`: ì›Œí¬í¬ì›Œë“œ ê¸°ë³¸ ì‹¤í–‰ ë¡œì§ ì¶”ê°€

**í…ŒìŠ¤íŠ¸:**
- `tests/test_tqqq_simulation.py`: ì›Œí¬í¬ì›Œë“œ ê´€ë ¨ í…ŒìŠ¤íŠ¸ ì¶”ê°€

### ë°ì´í„°/ê²°ê³¼ ì˜í–¥

- ê¸°ì¡´ 3ê°œ CSV ìŠ¤í‚¤ë§ˆ ìœ ì§€ (ë³€ê²½ ì—†ìŒ)
- ì‹ ê·œ CSV 2ê°œ ì¶”ê°€:
  - `storage/results/tqqq_rate_spread_lab_walkforward.csv`
  - `storage/results/tqqq_rate_spread_lab_walkforward_summary.csv`
- `meta.json`ì— ìƒˆë¡œìš´ í‚¤ ì¶”ê°€ (ê¸°ì¡´ êµ¬ì¡° í™•ì¥)

## 6) ë‹¨ê³„ë³„ ê³„íš(Phases)

### Phase 0 - í˜„ì¬ ìƒíƒœ ì ê²€ ë° í…ŒìŠ¤íŠ¸ ì„¤ê³„ (ë ˆë“œ í—ˆìš©)

**ì‘ì—… ë‚´ìš©**:

- [ ] í˜„ì¬ repo ìƒíƒœ ì ê²€ (í”„ë¡¬í”„íŠ¸ 1 êµ¬í˜„ ì™„ë£Œ í™•ì¸)
  - funding_spreadê°€ float + dict + callable ì§€ì› í™•ì¸
  - softplus ê¸°ë°˜ ì›”ë³„ spread ìƒì„± ê°€ëŠ¥ í™•ì¸
  - rolling corr inf/NaN ê°€ë“œ ì ìš© í™•ì¸
  - meta_manager.py ì‚¬ìš© ê°€ëŠ¥ í™•ì¸
- [ ] ì›Œí¬í¬ì›Œë“œ ê´€ë ¨ ìƒìˆ˜ ì¶”ê°€ (constants.py)
- [ ] ì›Œí¬í¬ì›Œë“œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì„¤ê³„ (ë ˆë“œ í…ŒìŠ¤íŠ¸ ì¶”ê°€)
  - ì›Œí¬í¬ì›Œë“œ ì‹œì‘ì  ìë™ ê³„ì‚° í…ŒìŠ¤íŠ¸
  - ì²« êµ¬ê°„ 2-stage grid search í…ŒìŠ¤íŠ¸
  - local refine íƒìƒ‰ í…ŒìŠ¤íŠ¸
  - ê²°ê³¼ DataFrame ìŠ¤í‚¤ë§ˆ ê²€ì¦ í…ŒìŠ¤íŠ¸

**Validation**:

- [ ] `poetry run python validate_project.py` (passed=**, failed=**, skipped=__)

---

### Phase 1 - ì›Œí¬í¬ì›Œë“œ í•µì‹¬ ë¡œì§ êµ¬í˜„ (simulation.py)

**ì‘ì—… ë‚´ìš©**:

- [ ] `_local_refine_search()` í•¨ìˆ˜ êµ¬í˜„
  - ì§ì „ ì›” ìµœì  (a_prev, b_prev) ì£¼ë³€ì—ì„œ êµ­ì†Œ íƒìƒ‰
  - a in [a_prev - 0.50, a_prev + 0.50] step 0.05
  - b in [b_prev - 0.15, b_prev + 0.15] step 0.02 (b >= 0 ì œì•½)
  - ë°˜í™˜: (a_best, b_best, best_rmse, candidates)
- [ ] `run_walkforward_validation()` í•¨ìˆ˜ êµ¬í˜„
  - ì›Œí¬í¬ì›Œë“œ ì‹œì‘ì  ìë™ ê³„ì‚° (60ê°œì›” train ê°€ëŠ¥í•œ ì²« ë‹¬)
  - ë§¤ í…ŒìŠ¤íŠ¸ ì›”ë§ˆë‹¤:
    - ì§ì „ 60ê°œì›”ë¡œ (a, b) íŠœë‹
    - ì²« êµ¬ê°„: find_optimal_softplus_params() (2-stage)
    - ì´í›„ êµ¬ê°„: _local_refine_search() (local refine)
    - í…ŒìŠ¤íŠ¸ ì›”ì— softplus spread ì ìš©í•˜ì—¬ RMSE ì‚°ì¶œ
  - ê²°ê³¼ DataFrame ë°˜í™˜ (train_start, train_end, test_month, a_best, b_best, train_rmse, test_rmse ë“±)
- [ ] Phase 0 ë ˆë“œ í…ŒìŠ¤íŠ¸ê°€ ê·¸ë¦°ìœ¼ë¡œ ì „í™˜ í™•ì¸

**Validation**:

- [ ] `poetry run python validate_project.py` (passed=**, failed=**, skipped=__)

---

### Phase 2 - ì›Œí¬í¬ì›Œë“œ CSV ì‚°ì¶œë¬¼ ìƒì„±

**ì‘ì—… ë‚´ìš©**:

- [ ] walkforward.csv ì €ì¥ í•¨ìˆ˜ êµ¬í˜„
  - ì»¬ëŸ¼: train_start, train_end, test_month, a_best, b_best, train_rmse_pct, test_rmse_pct, n_train_days, n_test_days, search_mode
  - í•œê¸€ í—¤ë” ì˜µì…˜ (í”„ë¡¬í”„íŠ¸ì—ì„œ ì˜ë¬¸ ê¶Œì¥)
- [ ] walkforward_summary.csv ì €ì¥ í•¨ìˆ˜ êµ¬í˜„
  - í…ŒìŠ¤íŠ¸ RMSE ìš”ì•½: í‰ê· /ì¤‘ì•™ê°’/í‘œì¤€í¸ì°¨/ìµœëŒ“ê°’/ìµœì†Ÿê°’
  - ê¸€ë¡œë²Œ ìµœì  (a, b) ëŒ€ë¹„ ì›Œí¬í¬ì›Œë“œ ìš”ì•½ ë¹„êµ
  - (a, b) ì•ˆì •ì„± í†µê³„: í‰ê· /í‘œì¤€í¸ì°¨
- [ ] í…ŒìŠ¤íŠ¸ ì¶”ê°€: CSV ìŠ¤í‚¤ë§ˆ ë° ì €ì¥ ë™ì‘ ê²€ì¦

**Validation**:

- [ ] `poetry run python validate_project.py` (passed=**, failed=**, skipped=__)

---

### Phase 3 - Streamlit ì•± ë°˜ì˜ (ì›Œí¬í¬ì›Œë“œ ê¸°ë³¸ ì‹¤í–‰)

**ì‘ì—… ë‚´ìš©**:

- [ ] Streamlit ì•± ìˆ˜ì •
  - ê¸°ì¡´ ê³ ì • spread ëª¨ë“œ ìœ ì§€
  - Softplus ë™ì  ëª¨ë“œì—ì„œ ì›Œí¬í¬ì›Œë“œ ê¸°ë³¸ ì‹¤í–‰
  - ì›Œí¬í¬ì›Œë“œ ì§„í–‰ ìƒí™© í‘œì‹œ (progress bar)
  - ê²°ê³¼ í‘œì‹œ: ì›Œí¬í¬ì›Œë“œ ìš”ì•½ í†µê³„, (a, b) ì¶”ì´ ì°¨íŠ¸
- [ ] ê²°ê³¼ ìºì‹œ í™œìš© (CSV ì €ì¥ í›„ ì¬ì‚¬ìš© ê³ ë ¤)
  - st.cache_data ë˜ëŠ” session_state í™œìš©
  - ì´ë¯¸ ê²°ê³¼ê°€ ìˆìœ¼ë©´ ì¬ê³„ì‚° ìƒëµ ì˜µì…˜
- [ ] ì›Œí¬í¬ì›Œë“œ CSV ìë™ ì €ì¥ (ê¸°ì¡´ 3ê°œ + 2ê°œ)

**Validation**:

- [ ] `poetry run python validate_project.py` (passed=**, failed=**, skipped=__)

---

### Phase 4 - ë©”íƒ€ ê¸°ë¡ êµ¬í˜„

**ì‘ì—… ë‚´ìš©**:

- [ ] meta.json ê¸°ë¡ ë¡œì§ ì¶”ê°€ (Streamlit ì•±ì—ì„œ)
- [ ] ê¸°ë¡ í‚¤ (ìµœì†Œ í¬í•¨):
  - `funding_spread_mode`: `"softplus_ffr_monthly"`
  - `walkforward_settings`:
    - `train_window_months`: 60
    - `test_step_months`: 1
    - `test_month_ffr_usage`: `"same_month"` (í…ŒìŠ¤íŠ¸ ì›”ì—ë„ í•´ë‹¹ì›” FFR ì‚¬ìš©)
  - `tuning_policy`:
    - `first_window`: `"full_grid_2stage"`
    - `subsequent_windows`: `"local_refine"`
    - `local_refine_a_delta`: 0.50
    - `local_refine_a_step`: 0.05
    - `local_refine_b_delta`: 0.15
    - `local_refine_b_step`: 0.02
  - `output_files`: ê¸°ì¡´ 3ê°œ + ì›Œí¬í¬ì›Œë“œ 2ê°œ ê²½ë¡œ
  - `summary`: í…ŒìŠ¤íŠ¸ RMSE í‰ê· /ì¤‘ì•™ê°’/í‘œì¤€í¸ì°¨
- [ ] meta_manager.pyì— `tqqq_walkforward` íƒ€ì… ì¶”ê°€ (í•„ìš”ì‹œ)
- [ ] í…ŒìŠ¤íŠ¸ ì¶”ê°€: ë©”íƒ€ ê¸°ë¡ í˜•ì‹ ê²€ì¦

**Validation**:

- [ ] `poetry run python validate_project.py` (passed=**, failed=**, skipped=__)

---

### Phase 5 - ì™„ë£Œ ë³´ê³  ê²€ì¦

**ì‘ì—… ë‚´ìš©**:

- [ ] Streamlit ì•± ì‹¤í–‰í•˜ì—¬ ì „ì²´ í”Œë¡œìš° í™•ì¸
- [ ] ì™„ë£Œ ë³´ê³  ë‚´ìš© í™•ì¸:
  1. ì›Œí¬í¬ì›Œë“œ í…ŒìŠ¤íŠ¸ RMSE ìš”ì•½ (í‰ê· /ì¤‘ì•™ê°’/í‘œì¤€í¸ì°¨/ìµœëŒ“ê°’/ìµœì†Ÿê°’)
  2. ì›”ë³„ (a, b) ê°’ ì•ˆì •ì„± ì½”ë©˜íŠ¸
  3. ì‹¤í–‰ì‹œê°„ (ëŒ€ëµ) ë° local refine ì •ì±… íš¨ê³¼
  4. ì‚°ì¶œë¬¼ ìƒì„±/ê²½ë¡œ í™•ì¸
  5. meta.json ê¸°ë¡ í•­ëª© ìš”ì•½
- [ ] ê²°ê³¼ ë¬¸ì„œí™” (Notes ì„¹ì…˜ì— ê¸°ë¡)

**Validation**:

- [ ] `poetry run python validate_project.py` (passed=**, failed=**, skipped=__)

---

### ë§ˆì§€ë§‰ Phase - ë¬¸ì„œ ì •ë¦¬ ë° ìµœì¢… ê²€ì¦

**ì‘ì—… ë‚´ìš©**

- [ ] í•„ìš”í•œ ë¬¸ì„œ ì—…ë°ì´íŠ¸ (CLAUDE.md ë“±)
- [ ] `poetry run black .` ì‹¤í–‰(ìë™ í¬ë§· ì ìš©)
- [ ] ë³€ê²½ ê¸°ëŠ¥ ë° ì „ì²´ í”Œë¡œìš° ìµœì¢… ê²€ì¦
- [ ] DoD ì²´í¬ë¦¬ìŠ¤íŠ¸ ìµœì¢… ì—…ë°ì´íŠ¸ ë° ì²´í¬ ì™„ë£Œ
- [ ] ì „ì²´ Phase ì²´í¬ë¦¬ìŠ¤íŠ¸ ìµœì¢… ì—…ë°ì´íŠ¸ ë° ìƒíƒœ í™•ì •

**Validation**:

- [ ] `poetry run python validate_project.py` (passed=**, failed=**, skipped=__)

#### Commit Messages (Final candidates) - 5ê°œ ì¤‘ 1ê°œ ì„ íƒ

1. TQQQì‹œë®¬ë ˆì´ì…˜ / ì›Œí¬í¬ì›Œë“œ ê²€ì¦ (60m train / 1m test) êµ¬í˜„
2. TQQQì‹œë®¬ë ˆì´ì…˜ / ì›Œí¬í¬ì›Œë“œ ê²€ì¦ + local refine íŠœë‹ ì •ì±… ì ìš©
3. TQQQì‹œë®¬ë ˆì´ì…˜ / ì›Œí¬í¬ì›Œë“œ CSV ì‚°ì¶œë¬¼ + Streamlit ê¸°ë³¸ ì‹¤í–‰ ë°˜ì˜
4. TQQQì‹œë®¬ë ˆì´ì…˜ / ë™ì  ìŠ¤í”„ë ˆë“œ íŒŒë¼ë¯¸í„° ì•ˆì •ì„± ì›Œí¬í¬ì›Œë“œ ê²€ì¦
5. TQQQì‹œë®¬ë ˆì´ì…˜ / softplus íŒŒë¼ë¯¸í„° ì›Œí¬í¬ì›Œë“œ ê²€ì¦ + ë©”íƒ€ ê¸°ë¡

## 7) ë¦¬ìŠ¤í¬(Risks)

1. **ì‹¤í–‰ ì‹œê°„ ìœ„í—˜**: ì›Œí¬í¬ì›Œë“œê°€ ë§¤ìš° ì˜¤ë˜ ê±¸ë¦´ ìˆ˜ ìˆìŒ (ì˜ˆìƒ 50ë¶„+)
   - ì™„í™”: progress barë¡œ ì§„í–‰ ìƒí™© í‘œì‹œ, ì¶”í›„ ë³‘ë ¬ ì²˜ë¦¬ ìµœì í™” ê°€ëŠ¥
   - ì™„í™”: ê²°ê³¼ ìºì‹œ í™œìš© (CSV ì €ì¥ í›„ ì¬ì‚¬ìš©)
2. **ë©”ëª¨ë¦¬ ìœ„í—˜**: ë‹¤ìˆ˜ì˜ ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼ ì €ì¥ ì‹œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€
   - ì™„í™”: ê²°ê³¼ DataFrameì„ ì¦‰ì‹œ CSVë¡œ ì €ì¥, ë¶ˆí•„ìš”í•œ ì¤‘ê°„ ê²°ê³¼ ì œê±°
3. **ë°ì´í„° ë¶€ì¡± ìœ„í—˜**: 60ê°œì›” trainì´ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°
   - ì™„í™”: ì›Œí¬í¬ì›Œë“œ ì‹œì‘ì  ìë™ ê³„ì‚°, ë°ì´í„° ë¶€ì¡± ì‹œ ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€
4. **íŒŒë¼ë¯¸í„° ë¶ˆì•ˆì • ìœ„í—˜**: ì›”ë³„ (a, b) ê°’ì´ í¬ê²Œ ë³€ë™í•  ìˆ˜ ìˆìŒ
   - ì™„í™”: walkforward_summary.csvì— ì•ˆì •ì„± í†µê³„ í¬í•¨

## 8) ë©”ëª¨(Notes)

### í•µì‹¬ ìˆ˜ì‹

**ì›Œí¬í¬ì›Œë“œ êµ¬ì¡°**:
```
Train: [t-60, t-1] ê°œì›” (60ê°œì›”)
Test: [t] ê°œì›” (1ê°œì›”)
```

**Local Refine ë²”ìœ„ (í”„ë¡¬í”„íŠ¸ì—ì„œ í™•ì •)**:
```
a in [a_prev - 0.50, a_prev + 0.50] step 0.05  (21ê°œ)
b in [b_prev - 0.15, b_prev + 0.15] step 0.02  (16ê°œ)
ì´ 336 ì¡°í•© (b >= 0 ì œì•½ìœ¼ë¡œ ì¼ë¶€ ê°ì†Œ ê°€ëŠ¥)
```

### ì˜ˆìƒ CSV ìŠ¤í‚¤ë§ˆ

**walkforward.csv ì»¬ëŸ¼**:
| ì»¬ëŸ¼ | ì„¤ëª… |
|------|------|
| train_start | í•™ìŠµ ê¸°ê°„ ì‹œì‘ (YYYY-MM) |
| train_end | í•™ìŠµ ê¸°ê°„ ì¢…ë£Œ (YYYY-MM) |
| test_month | í…ŒìŠ¤íŠ¸ ì›” (YYYY-MM) |
| a_best | ìµœì  a íŒŒë¼ë¯¸í„° |
| b_best | ìµœì  b íŒŒë¼ë¯¸í„° |
| train_rmse_pct | í•™ìŠµ êµ¬ê°„ RMSE (%) |
| test_rmse_pct | í…ŒìŠ¤íŠ¸ êµ¬ê°„ RMSE (%) |
| n_train_days | í•™ìŠµ ê±°ë˜ì¼ ìˆ˜ |
| n_test_days | í…ŒìŠ¤íŠ¸ ê±°ë˜ì¼ ìˆ˜ |
| search_mode | íƒìƒ‰ ëª¨ë“œ (full_grid_2stage / local_refine) |

**walkforward_summary.csv ì»¬ëŸ¼**:
| ì»¬ëŸ¼ | ì„¤ëª… |
|------|------|
| metric | ì§€í‘œëª… (test_rmse_mean, test_rmse_median, ...) |
| value | ê°’ |

### ì°¸ê³  íŒŒì¼

- í”„ë¡¬í”„íŠ¸ 1 ê³„íšì„œ: `docs/plans/PLAN_dynamic_funding_spread_softplus.md`
- ê¸°ì¡´ CSV ìœ„ì¹˜: `storage/results/tqqq_rate_spread_lab_*.csv`
- FFR ë°ì´í„°: `storage/etc/federal_funds_rate_monthly.csv`
- ë©”íƒ€ ê¸°ë¡: `storage/results/meta.json`

### ì‚¬ìš©ì í™•ì¸ ê²°ê³¼

- ì›Œí¬í¬ì›Œë“œ ê¸°ë³¸ ì‹¤í–‰ (í”„ë¡¬í”„íŠ¸ ìš”êµ¬ëŒ€ë¡œ)
- ì¶”í›„ ë³‘ë ¬ ì²˜ë¦¬ ìµœì í™”, ë²„íŠ¼ í´ë¦­ ë°©ì‹ ë³€ê²½ ê°€ëŠ¥ì„± ê³ ë ¤

### ì§„í–‰ ë¡œê·¸ (KST)

- 2026-01-21 15:30: ê³„íšì„œ ì´ˆì•ˆ ì‘ì„±

---
