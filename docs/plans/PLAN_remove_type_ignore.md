# Implementation Plan: type: ignore ê·¼ë³¸ ì œê±°

> ì‘ì„±/ìš´ì˜ ê·œì¹™(SoT): ë°˜ë“œì‹œ [docs/CLAUDE.md](../CLAUDE.md)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

**ìƒíƒœ**: âœ… Done

---

ğŸš« **ì´ ì˜ì—­ì€ ì‚­ì œ/ìˆ˜ì • ê¸ˆì§€** ğŸš«

**ìƒíƒœ ì˜µì…˜**: ğŸŸ¡ Draft / ğŸ”„ In Progress / âœ… Done

**Done ì²˜ë¦¬ ê·œì¹™**:

- âœ… Done ì¡°ê±´: DoD ëª¨ë‘ [x] + `skipped=0` + `failed=0`
- âš ï¸ **ìŠ¤í‚µì´ 1ê°œë¼ë„ ì¡´ì¬í•˜ë©´ Done ì²˜ë¦¬ ê¸ˆì§€ + DoD í…ŒìŠ¤íŠ¸ í•­ëª© ì²´í¬ ê¸ˆì§€**
- ìƒì„¸: [docs/CLAUDE.md](../CLAUDE.md) ì„¹ì…˜ 3, 5 ì°¸ê³ 

---

**ì‘ì„±ì¼**: 2026-01-29 22:00
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2026-01-29 22:15
**ê´€ë ¨ ë²”ìœ„**: backtest, utils, tests
**ê´€ë ¨ ë¬¸ì„œ**: `src/qbt/backtest/CLAUDE.md`, `src/qbt/utils/CLAUDE.md`, `tests/CLAUDE.md`

---

## 0) ê³ ì • ê·œì¹™ (ì´ planì€ ë°˜ë“œì‹œ ì•„ë˜ ê·œì¹™ì„ ë”°ë¥¸ë‹¤)

> ğŸš« **ì´ ì˜ì—­ì€ ì‚­ì œ/ìˆ˜ì • ê¸ˆì§€** ğŸš«
> ì´ ì„¹ì…˜(0)ì€ ì§€ì›Œì§€ë©´ ì•ˆ ë  ë¿ë§Œ ì•„ë‹ˆë¼ **ë¬¸êµ¬ê°€ ìˆ˜ì •ë˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.**
> ê·œì¹™ì˜ ìƒì„¸ ì •ì˜/ì˜ˆì™¸ëŠ” ë°˜ë“œì‹œ [docs/CLAUDE.md](../CLAUDE.md)ë¥¼ ë”°ë¦…ë‹ˆë‹¤.

- Validationì—ì„œ `poetry run python validate_project.py`ê°€ ì‹¤íŒ¨í•˜ë©´ **í•´ë‹¹ Phaseì—ì„œ ì¦‰ì‹œ ìˆ˜ì • í›„ ì¬ê²€ì¦**í•œë‹¤.
- Phase 0ì€ "ë ˆë“œ(ì˜ë„ì  ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸)" í—ˆìš©, Phase 1ë¶€í„°ëŠ” **ê·¸ë¦° ìœ ì§€**ë¥¼ ì›ì¹™ìœ¼ë¡œ í•œë‹¤.
- ì´ë¯¸ ìƒì„±ëœ planì€ **ì²´í¬ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ ì™¸ ìˆ˜ì • ê¸ˆì§€**í•œë‹¤.
- ìŠ¤í‚µì€ ê°€ëŠ¥í•˜ë©´ **Phase ë¶„í•´ë¡œ ì œê±°**í•œë‹¤.

---

## 1) ëª©í‘œ(Goal)

- [x] í”„ë¡œì íŠ¸ ë‚´ ëª¨ë“  `# type: ignore` ì£¼ì„ì„ íƒ€ì… ì‹œìŠ¤í…œ ê°œì„ ìœ¼ë¡œ ì œê±° (8ê°œ)
- [x] PyRight strict ëª¨ë“œì—ì„œ `type: ignore` ì—†ì´ í†µê³¼

## 2) ë¹„ëª©í‘œ(Non-Goals)

- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë³€ê²½ (ëŸ°íƒ€ì„ ë™ì‘ì€ ì™„ì „íˆ ë™ì¼í•´ì•¼ í•¨)
- pyrightconfig.jsonì˜ ê¸°ì¡´ ê·œì¹™ ì™„í™”
- ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ ì¶”ê°€ (ê¸°ì¡´ í…ŒìŠ¤íŠ¸ë¡œ íšŒê·€ ê²€ì¦)

## 3) ë°°ê²½/ë§¥ë½(Context)

### í˜„ì¬ ë¬¸ì œì  / ë™ê¸°

- 8ê°œì˜ `type: ignore` ì£¼ì„ì´ 3ê°œ íŒŒì¼ì— ë¶„í¬
- ëª¨ë‘ íƒ€ì… êµ¬ì¡° ê°œì„ ìœ¼ë¡œ ê·¼ë³¸ í•´ê²° ê°€ëŠ¥í•œ ì¼€ì´ìŠ¤
- `type: ignore`ëŠ” ì‹¤ì œ íƒ€ì… ì˜¤ë¥˜ë¥¼ ìˆ¨ê¸¸ ìˆ˜ ìˆì–´ ì œê±°ê°€ ë°”ëŒì§

### ì¼€ì´ìŠ¤ ë¶„ì„

1. **strategy.py (2ê°œ)** - `reportUnnecessaryComparison`: `float | None` ì„ ì–¸ì´ì§€ë§Œ ì‹¤ì œë¡œ None ë¶ˆê°€ëŠ¥
2. **cli_helpers.py (1ê°œ)** - `reportUnnecessaryIsInstance`: ë™ì¼ ì²˜ë¦¬ ë¡œì§ì˜ ë¶ˆí•„ìš”í•œ isinstance ë£¨í”„
3. **test_tqqq_visualization.py (5ê°œ)** - `redundant-cast` / `no-any-unimported`: isinstance í›„ ì¤‘ë³µ cast

### ì˜í–¥ë°›ëŠ” ê·œì¹™(ë°˜ë“œì‹œ ì½ê³  ì „ì²´ ìˆ™ì§€)

> ì•„ë˜ ë¬¸ì„œì— ê¸°ì¬ëœ ê·œì¹™ì„ **ëª¨ë‘ ìˆ™ì§€**í•˜ê³  ì¤€ìˆ˜í•©ë‹ˆë‹¤.

- `src/qbt/backtest/CLAUDE.md`
- `src/qbt/utils/CLAUDE.md`
- `tests/CLAUDE.md`

## 4) ì™„ë£Œ ì¡°ê±´(Definition of Done)

- [x] í”„ë¡œì íŠ¸ ë‚´ `type: ignore` ì£¼ì„ 0ê°œ
- [x] `poetry run python validate_project.py` í†µê³¼ (failed=0, skipped=0)
- [x] `poetry run black .` ì‹¤í–‰ ì™„ë£Œ
- [x] plan ì²´í¬ë°•ìŠ¤ ìµœì‹ í™”

## 5) ë³€ê²½ ë²”ìœ„(Scope)

### ë³€ê²½ ëŒ€ìƒ íŒŒì¼

- `src/qbt/backtest/strategy.py`: íƒ€ì… ì–´ë…¸í…Œì´ì…˜ ìˆ˜ì • (2ê°œ ì œê±°)
- `src/qbt/utils/cli_helpers.py`: ì˜ˆì™¸ ì²˜ë¦¬ êµ¬ì¡° ê°„ê²°í™” (1ê°œ ì œê±°)
- `tests/test_tqqq_visualization.py`: ì¤‘ë³µ cast ì œê±° (5ê°œ ì œê±°)

### ë°ì´í„°/ê²°ê³¼ ì˜í–¥

- ì—†ìŒ. ëª¨ë“  ë³€ê²½ì€ ëŸ°íƒ€ì„ ë™ì‘ ë™ì¼

## 6) ë‹¨ê³„ë³„ ê³„íš(Phases)

### Phase 1 -- íƒ€ì… ìˆ˜ì • ë° êµ¬ì¡° ê°œì„  (ê·¸ë¦° ìœ ì§€)

**ì‘ì—… ë‚´ìš©**:

- [x] strategy.py: `prev_upper_band`, `prev_lower_band`ì˜ `float | None` -> `float`ë¡œ ë³€ê²½, `is not None` ê°€ë“œ ì œê±°
- [x] cli_helpers.py: isinstance ë£¨í”„ë¥¼ ì§ì ‘ except Exceptionìœ¼ë¡œ ê°„ê²°í™”
- [x] test_tqqq_visualization.py: `cast()` í˜¸ì¶œ ì œê±°, isinstance assert ì´í›„ ì§ì ‘ ì†ì„± ì ‘ê·¼ (Histogramì€ dict ì ‘ê·¼)

**Validation**:

- [x] `poetry run python validate_project.py` (passed=246, failed=0, skipped=0)

---

### ë§ˆì§€ë§‰ Phase -- ë¬¸ì„œ ì •ë¦¬ ë° ìµœì¢… ê²€ì¦

**ì‘ì—… ë‚´ìš©**

- [x] `poetry run black .` ì‹¤í–‰
- [x] DoD ì²´í¬ë¦¬ìŠ¤íŠ¸ ìµœì¢… ì—…ë°ì´íŠ¸

**Validation**:

- [x] `poetry run python validate_project.py` (passed=246, failed=0, skipped=0)

#### Commit Messages (Final candidates) -- 5ê°œ ì¤‘ 1ê°œ ì„ íƒ

1. íƒ€ì… ì•ˆì •ì„± / type: ignore ê·¼ë³¸ ì œê±° (íƒ€ì… ì–´ë…¸í…Œì´ì…˜ ë° êµ¬ì¡° ê°œì„ )
2. íƒ€ì… ì•ˆì •ì„± / PyRight strict ì™„ì „ ëŒ€ì‘ (type: ignore ì „ëŸ‰ ì œê±°)
3. ì½”ë“œ í’ˆì§ˆ / type: ignore 8ê°œ ê·¼ë³¸ í•´ê²° (ë¶ˆí•„ìš”í•œ ë°©ì–´ì  íƒ€ì… ì •ë¦¬)
4. íƒ€ì… ì•ˆì •ì„± / ë¶ˆí•„ìš”í•œ type: ignore ì œê±° ë° íƒ€ì… êµ¬ì¡° ì •ë¦¬
5. ì½”ë“œ í’ˆì§ˆ / type: ignore ì œê±° (íƒ€ì… íë¦„ ë¶„ì„ ê°œì„ , ë™ì‘ ë™ì¼)

## 7) ë¦¬ìŠ¤í¬(Risks)

- ë¦¬ìŠ¤í¬ ë‚®ìŒ: ëª¨ë“  ë³€ê²½ì´ íƒ€ì… ì–´ë…¸í…Œì´ì…˜/êµ¬ì¡° ìˆ˜ì¤€ì´ë©° ëŸ°íƒ€ì„ ë™ì‘ ë™ì¼
- ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ì „ëŸ‰ í†µê³¼ë¡œ íšŒê·€ ê²€ì¦

## 8) ë©”ëª¨(Notes)

### ì§„í–‰ ë¡œê·¸ (KST)

- 2026-01-29 22:00: ê³„íšì„œ ì‘ì„± ë° êµ¬í˜„ ì‹œì‘
- 2026-01-29 22:15: ì „ì²´ êµ¬í˜„ ì™„ë£Œ, validate_project.py í†µê³¼ (passed=246, failed=0, skipped=0)

---
